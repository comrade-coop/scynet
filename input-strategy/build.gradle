/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.3.20'

    id "org.jmailen.kotlinter" version "1.23.1"

    id 'com.google.protobuf' version '0.8.8'

    id 'application'
}

task classpath {
    doLast {
        println configurations.runtimeClasspath.join(':')
    }
}

// Hopefully, this will work on Windows
def protocVersion = 'protoc --version'.execute().in.text.tokenize(' \n').last()
if (protocVersion == '') {
    protocVersion = 'protoc.exe --version'.execute().in.text.tokenize(' \n').last()
}

repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}
dependencies {
    implementation 'com.google.protobuf:protobuf-java:' + protocVersion
    implementation 'io.grpc:grpc-stub:1.0.0-pre2'
    implementation 'io.grpc:grpc-protobuf:1.0.0-pre2'

    implementation 'org.apache.kafka:kafka-streams:2.2.0'
    implementation 'org.apache.kafka:kafka-clients:2.2.0'

    implementation 'com.github.daniel-shuy:kafka-protobuf-serde:1.0.0'

    implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'
    testImplementation 'org.jetbrains.kotlin:kotlin-test'
    testImplementation 'org.jetbrains.kotlin:kotlin-test-junit'
}

// Define the main class for the application.
mainClassName = 'scynet.strategy.input.AppKt'

run {
    args System.getProperty("exec.args", "").split()
}
